# 二、创建型设计模式
创建型设计模式是一类处理对象创建的设计模式
## 工厂模式
创建同一类对象，但无法解决对象识别的问题（即怎样知道一个对象的类型）
<details>
  <summary>show me code</summary>
  <pre>
    <code>
      function createPerson(name, age, job) {
        let o = new Object()
        o.name = name
        o.age = age
        o.job = job
        o.sayHi = function() {
          console.log('hi')
        }
        return o
      }
      let person1 = createPerson('jerry', 26, 'software Engineer')
      let person2 = createPerson('zn', 28, 'Doctor')
    </code>
  </pre>
</details>

## 构造函数模式

<details>
  <summary>show me code</summary>
  <pre>
    <code>
      function Person(name, age, job) {
        this.name = name
        this.age = age
        this.job = job
        this.sayHi = function() {
          console.log('hi')
        }
      }
      let person1 = new Person('jerry', 26, 'software Engineer')
      let person2 = new Person('zn', 28, 'Doctor')
    </code>
  </pre>
</details>

构造函数本身也是函数，只不过特殊在可用于创建对象。要创建对象需使用new操作符。new在这里做了四件事：
1. 创建一个新对象
2. 将构造函数的作用域赋值给新对象（因此this指向这个新对象）
3. 执行构造函数内的代码，为新对象添加属性和方法
4. 返回新对象

**手动实现一个new** 

每个构造函数创建的对象实例，内部都有一个实例属性constructor，它指向对象实例的构造函数，因此可以通过instanceof操作符来检测对象的类型，这是胜过工厂模式的地方，可以将它的实例标识为一种特定的类型。

### 构造函数的应用
构造函数也是函数，当使用new操作符调用时用来创建对象，不通过new调用时和普通函数没什么两样。
<details>
  <summary>show me code</summary>
  <pre>
    <code>
      // 作为构造函数使用
      let person1 = new Person('jerry', 26, 'software Engineer')
      person1.sayHi()
      // 作为普通函数使用
      Person('ally', 28, 'Engineer') // 添加到window对象
      window.sayHi()
      // 在另一个对象作用域内调用
      let o = new Object()
      Person.call(o, 'jerry', 26, 'software engineer')
      o.sayHi()
    </code>
  </pre>
</details>

### 构造函数的问题

构造函数中的每个方法，都会在每个实例上重新创建一次

        person1.sayHi === person2.sayHi // false

虽然可以在构造函数内调用外部方法，但在全局作用域中调用多个方法，封装性就不存在了。

好在，这个问题可以通过原型模式来解决。

## 原型模式
每个函数内部都有一个prototype属性，它是一个指针指向一个对象，这个对象包含了由特定类型的所有实例共享的属性和方法。使用原型对象，可以让所有实例共享它包含的属性和方法，这样就可以把构造函数的属性和方法都写在原型对象上。

<details>
  <summary>show me code</summary>
  <pre>
    <code>
      function Person() {
      }
      Person.prototype.name = 'jerry'
      Person.prototype.age = 26
      Person.prototype.job = 'software engineer'
      Person.prototype.sayHi = function () {
        console.log('hi')
      }
      let person1 = new Person()
      let person2 = new Person()
      console.log(person1.sayHi === person2.sayHi) // true
    </code>
  </pre>
</details>