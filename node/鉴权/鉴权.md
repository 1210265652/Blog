# 鉴权
- cookie
- session
- Token
- A


##  cookie

查看cookie: `req.headers.cookie`

设置cookie:  `res.setHeader('Set-Cookie', 'cookieData=ok')`

cookie可存储的内容少，浏览器有限制，且在浏览器端容易被人篡改

## session

服务端存储session数据，将获取数据的key设置在cookie中。

### koa-session

为签名加密算法设置keys秘钥（摘要算法）；

配置koa-session并注册；

设置session，访问获取 `ctx.session.obj`


### redis
一般将session的数据放在redis中，有些东西没必要每次都从数据库去拿，就用redis缓存

<details>
  <pre>
    <code>
      const redis = require('redis')
      const client = redis.createClient(6379, 'localhost')
      client.set('name', 'jerry')
      client.get('name')
    </code>
  </pre>
</details>

### koa-redis

### session如何鉴权

- 用户登录的时候，服务端会生成一个唯一的会话标识，并以它为key存储数据
- 会话标识在客户端和服务端之间通过cookie进行传输
- 服务端通过会话标识可以获取到会话相关的信息，然后对客户端的请求进行响应；如果找不到有效的会话，那么认为用户是未登录状态
- 会话有过期时间，也可以通过一些操作（比如登出）来主动删除

### session方式的不足 
- 服务器有状态的操作
- 只面对浏览器不灵活，app怎么办，跨域怎么办


## Token验证

### JWT加密算法（JSON WEB Token）
Bearer Token包含三个组成部分
- 令牌头
- payload
- 哈希

前两部分使用 `base64` 编码，可逆。第三个哈希，反篡改。